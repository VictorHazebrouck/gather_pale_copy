<ul id="nearby-main">
    <template x-if="$store.videoChat.isMyScreenshareEnabled">
        <div class="nearby-player-card">
            <video
                x-show="$store.videoChat.isMyScreenshareEnabled"
                class="video"
                x-ref="video"
                x-init="$refs.video.srcObject = $store.videoChat.myScreenCast;"
                autoplay
            ></video>
        </div>
    </template>
    <template x-for="player in $store.videoChat.nearbyPlayers.sort((a,b) => b.isVideoEnabled - a.isVideoEnabled)">
        <div>
            <div class="nearby-player-card">
                <p x-text="player.isSoundEnabled"></p>
                <i
                    x-show="!player.isVideoEnabled"
                    class="fa-solid fa-video-slash"
                    style="color: red"
                ></i>
                <template x-if="player.stream">
                    <video
                        x-show="player.isVideoEnabled"
                        class="video"
                        x-ref="video"
                        x-init="$refs.video.srcObject = player.stream;"
                        autoplay
                    ></video>
                </template>
            </div>
            <template x-if="player.screenShare">
                <div class="nearby-player-card">
                    <video
                        x-show="player.isVideoEnabled"
                        class="video"
                        x-ref="video"
                        x-init="$refs.video.srcObject = player.screenShare;"
                        autoplay
                    ></video>
                </div>
            </template>
        </div>
    </template>
</ul>
<style>
    #nearby-main {
        position: absolute;
        height: 100%;
        color: var(--txt-color-dark-1);
        display: flex;
        flex-direction: column;
        padding-left: var(--pad-small);
        padding-bottom: var(--pad-small);
        overflow: scroll;

        -ms-overflow-style: none;
        scrollbar-width: none;
        ::-webkit-scrollbar {
            display: none;
        }

        .nearby-player-card {
            margin-top: var(--pad-small);
            border-radius: 12px;
            border: var(--border);
            width: 180px;
            height: 100px;
            min-height: 100px;
            background-color: var(--bg-color-dark-2);
            cursor: pointer;
            overflow: hidden;

            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;

            p {
                position: absolute;
                align-self: flex-start;
                color: var(--txt-color-dark-2);
            }

            i {
                font-size: 22px;
            }

            .video {
                margin: 0;
                height: 100%;
                width: 100%;
                object-fit: cover;
            }
        }
    }
</style>
